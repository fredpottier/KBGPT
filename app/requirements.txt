# === Backend API ===
fastapi==0.116.1
uvicorn==0.30.3

# === Authentication & Security (Phase 0) ===
PyJWT[crypto]==2.9.0
passlib[bcrypt]==1.7.4
bcrypt==4.0.1  # Version compatible avec passlib 1.7.4 (pas 5.x)
python-jose[cryptography]==3.3.0
slowapi==0.1.9  # Rate limiting
email-validator>=2.0.0  # Pour Pydantic EmailStr

# === Vector DB ===
qdrant-client==1.15.1

# === Graph DB ===
neo4j>=5.14.0

# === Embeddings et Reranking (GPU CUDA 12.0) ===
# PyTorch avec support CUDA 12.0 pour RTX 5070 Ti
# Installation via index PyTorch officiel
torch --index-url https://download.pytorch.org/whl/cu120
torchvision --index-url https://download.pytorch.org/whl/cu120
sentence-transformers
transformers
scikit-learn
numpy

# === Utilitaires ===
pandas
openai==1.55.3
anthropic>=0.40.0
boto3>=1.28.0
botocore>=1.31.0
httpx==0.27.2
python-dotenv
python-multipart
openpyxl
nest-asyncio  # Pour nested event loops dans RQ worker

# === Dépendances tests (à retirer pour prod) ===
pytest>=7.4.0
pytest-mock>=3.11.0
respx>=0.20.2

# === Analyse PPTX / PDF (VERSION ALLÉGÉE) ===
# MegaParse minimal (pas la version complète avec onnxtr/playwright)
megaparse
python-pptx
pillow
PyMuPDF>=1.23.0
pdfplumber>=0.11.0
pypdf
pycryptodome>=3.21.0
pdfminer.six==20231228
pyyaml
jinja2

# LangChain minimal (pas toute la suite)
langchain-core>=0.3,<0.4
langchain-anthropic>=0.1.23
langchain_openai>=0.1.21

# Unstructured MINIMAL (pas [all-docs] qui est énorme !)
unstructured==0.15.0

# OCR simple (pas ONNX qui est lourd)
pytesseract

# Optionnel si vraiment besoin plus tard:
# llama-parse>=0.4.0  # API externe, pas besoin localement
# playwright>=1.47.0  # 200MB+ de navigateurs
# onnxtr>=0.6.0       # Modèles OCR lourds
# layoutparser         # Modèles computer vision
# unstructured[all-docs] # Support tous formats (très lourd)

# === Lang / NLP util ===
langdetect

# === OSMOSE Semantic Intelligence V2.1 (Phase 1) ===
# NER multilingue
spacy>=3.7.2
# Modèles spaCy à installer séparément:
# python -m spacy download en_core_web_trf
# python -m spacy download fr_core_news_trf
# python -m spacy download de_core_news_trf
# python -m spacy download xx_ent_wiki_sm

# Clustering sémantique
hdbscan>=0.8.33

# Détection langue
fasttext>=0.9.2
# Modèle fasttext à télécharger:
# wget https://dl.fbaipublicfiles.com/fasttext/supervised-models/lid.176.bin

# === Debug ===
debugpy
redis>=5.0
rq>=1.15
pydantic-settings

# === Zep Integration ===
zep-python>=2.0.2
asyncpg>=0.29.0

# === PostgreSQL (Phase 2.5 - Memory Layer) ===
psycopg2-binary>=2.9.9
sqlalchemy[asyncio]>=2.0.0

# === Fuzzy Matching (Phase 5B + Hybrid Anchor Model) ===
fuzzywuzzy>=0.18.0
python-Levenshtein>=0.21.0
rapidfuzz>=3.5.0  # Hybrid Anchor Model - fuzzy matching haute performance pour anchors

# === Folder Watcher (Phase 3 - Multi-Source) ===
watchdog>=3.0.0

# === Architecture Agentique OSMOSE (Phase 1.5) ===
langgraph>=0.2.0
networkx>=3.1

# === Phase 2 OSMOSE - Intelligence Relationnelle (Semaine 14+) ===
# Note: sentence-transformers, scikit-learn, spacy déjà installés ci-dessus
# Versions spécifiques pour Phase 2:
# sentence-transformers (déjà installé)
# scikit-learn (déjà installé)
# spacy>=3.7.2 (déjà installé)
# networkx>=3.1 (déjà installé - graphe algorithms)

# === Phase 2.8 OSMOSE - RawAssertion Architecture ===
python-ulid>=2.2.0  # ULID pour IDs RawAssertion

# Modèles spaCy supplémentaires pour patterns multilingues:
# python -m spacy download en_core_web_sm  # English (small - 13MB)
# python -m spacy download fr_core_news_sm # French (small - 16MB)
